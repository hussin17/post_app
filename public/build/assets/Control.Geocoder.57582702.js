(function(_,q){function Q(r){if(r&&r.__esModule)return r;var i=Object.create(null);return r&&Object.keys(r).forEach(function(u){if(u!=="default"){var t=Object.getOwnPropertyDescriptor(r,u);Object.defineProperty(i,u,t.get?t:{enumerable:!0,get:function(){return r[u]}})}}),i.default=r,i}var e=Q(q);function D(r,i){r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i}function V(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function f(r,i){return e.Util.extend(i,r.geocodingQueryParams)}function m(r,i){return e.Util.extend(i,r.reverseQueryParams)}var $=0,X=/[&<>"'`]/g,Y=/[&<>"'`]/,Z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function ee(r){return Z[r]}function te(r){return r==null?"":r?(r=""+r,Y.test(r)?r.replace(X,ee):r):r+""}function R(r,i,u,t,s){var o="_l_geocoder_"+$++;i[s||"callback"]=o,window[o]=e.Util.bind(u,t);var a=document.createElement("script");a.type="text/javascript",a.src=r+O(i),a.id=o,document.getElementsByTagName("head")[0].appendChild(a)}function g(r,i,u){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===4){var s;if(t.status!==200&&t.status!==304)s="";else if(typeof t.response=="string")try{s=JSON.parse(t.response)}catch{s=t.response}else s=t.response;u(s)}},t.open("GET",r+O(i),!0),t.responseType="json",t.setRequestHeader("Accept","application/json"),t.send(null)}function oe(r,i){return r.replace(/\{ *([\w_]+) *\}/g,function(u,t){var s=i[t];return s===void 0?s="":typeof s=="function"&&(s=s(i)),te(s)})}function O(r,i,u){var t=[];for(var s in r){var o=encodeURIComponent(u?s.toUpperCase():s),a=r[s];if(!Array.isArray(a))t.push(o+"="+encodeURIComponent(String(a)));else for(var n=0;n<a.length;n++)t.push(o+"="+encodeURIComponent(a[n]))}return(!i||i.indexOf("?")===-1?"?":"&")+t.join("&")}var k=function(){function r(u){this.options={serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{token:this.options.apiKey,SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"});g(this.options.serviceUrl+"/findAddressCandidates",a,function(n){var c=[];if(n.candidates&&n.candidates.length)for(var p=0;p<=n.candidates.length-1;p++){var l=n.candidates[p],d=e.latLng(l.location.y,l.location.x),h=e.latLngBounds(e.latLng(l.extent.ymax,l.extent.xmax),e.latLng(l.extent.ymin,l.extent.xmin));c[p]={name:l.address,bbox:h,center:d}}s.call(o,c)})},i.suggest=function(t,s,o){return this.geocode(t,s,o)},i.reverse=function(t,s,o,a){var n=m(this.options,{location:t.lng+","+t.lat,distance:100,f:"json"});g(this.options.serviceUrl+"/reverseGeocode",n,function(c){var p=[];if(c&&!c.error){var l=e.latLng(c.location.y,c.location.x),d=e.latLngBounds(l,l);p.push({name:c.address.Match_addr,center:l,bbox:d})}o.call(a,p)})},r}();function se(r){return new k(r)}var B=function(){function r(u){this.options={serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations"},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{query:t,key:this.options.apiKey});R(this.options.apiKey,a,function(n){var c=[];if(n.resourceSets.length>0)for(var p=n.resourceSets[0].resources.length-1;p>=0;p--){var l=n.resourceSets[0].resources[p],d=l.bbox;c[p]={name:l.name,bbox:e.latLngBounds([d[0],d[1]],[d[2],d[3]]),center:e.latLng(l.point.coordinates)}}s.call(o,c)},this,"jsonp")},i.reverse=function(t,s,o,a){var n=m(this.options,{key:this.options.apiKey});R(this.options.serviceUrl+t.lat+","+t.lng,n,function(c){for(var p=[],l=c.resourceSets[0].resources.length-1;l>=0;l--){var d=c.resourceSets[0].resources[l],h=d.bbox;p[l]={name:d.name,bbox:e.latLngBounds([h[0],h[1]],[h[2],h[3]]),center:e.latLng(d.point.coordinates)}}o.call(a,p)},this,"jsonp")},r}();function ne(r){return new B(r)}var N=function(){function r(u){this.options={serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{key:this.options.apiKey,address:t});g(this.options.serviceUrl,a,function(n){var c=[];if(n.results&&n.results.length)for(var p=0;p<=n.results.length-1;p++){var l=n.results[p],d=e.latLng(l.geometry.location),h=e.latLngBounds(e.latLng(l.geometry.viewport.northeast),e.latLng(l.geometry.viewport.southwest));c[p]={name:l.formatted_address,bbox:h,center:d,properties:l.address_components}}s.call(o,c)})},i.reverse=function(t,s,o,a){var n=m(this.options,{key:this.options.apiKey,latlng:t.lat+","+t.lng});g(this.options.serviceUrl,n,function(c){var p=[];if(c.results&&c.results.length)for(var l=0;l<=c.results.length-1;l++){var d=c.results[l],h=e.latLng(d.geometry.location),v=e.latLngBounds(e.latLng(d.geometry.viewport.northeast),e.latLng(d.geometry.viewport.southwest));p[l]={name:d.formatted_address,bbox:v,center:h,properties:d.address_components}}o.call(a,p)})},r}();function re(r){return new N(r)}var S=function(){function r(u){if(this.options={serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5},e.Util.setOptions(this,u),u.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});this.getJSON(this.options.serviceUrl+"geocode.json",a,s,o)},i.reverse=function(t,s,o,a){var n=t.lat+","+t.lng;this.options.reverseGeocodeProxRadius&&(n+=","+this.options.reverseGeocodeProxRadius);var c=m(this.options,{prox:n,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});this.getJSON(this.options.serviceUrl+"reversegeocode.json",c,o,a)},i.getJSON=function(t,s,o,a){g(t,s,function(n){var c=[];if(n.response.view&&n.response.view.length)for(var p=0;p<=n.response.view[0].result.length-1;p++){var l=n.response.view[0].result[p].location,d=e.latLng(l.displayPosition.latitude,l.displayPosition.longitude),h=e.latLngBounds(e.latLng(l.mapView.topLeft.latitude,l.mapView.topLeft.longitude),e.latLng(l.mapView.bottomRight.latitude,l.mapView.bottomRight.longitude));c[p]={name:l.address.label,properties:l.address,bbox:h,center:d}}o.call(a,c)})},r}(),T=function(){function r(u){this.options={serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{q:t,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!a.at&&!a.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");this.getJSON(this.options.serviceUrl+"/discover",a,s,o)},i.reverse=function(t,s,o,a){var n=m(this.options,{at:t.lat+","+t.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});this.getJSON(this.options.serviceUrl+"/revgeocode",n,o,a)},i.getJSON=function(t,s,o,a){g(t,s,function(n){var c=[];if(n.items&&n.items.length)for(var p=0;p<=n.items.length-1;p++){var l=n.items[p],d=e.latLng(l.position.lat,l.position.lng),h=void 0;l.mapView?h=e.latLngBounds(e.latLng(l.mapView.south,l.mapView.west),e.latLng(l.mapView.north,l.mapView.east)):h=e.latLngBounds(e.latLng(l.position.lat,l.position.lng),e.latLng(l.position.lat,l.position.lng)),c[p]={name:l.address.label,properties:l.address,bbox:h,center:d}}o.call(a,c)})},r}();function ie(r){return r.apiKey?new T(r):new S(r)}function K(r){var i;if(i=r.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return e.latLng((/N/i.test(i[1])?1:-1)*+i[2],(/E/i.test(i[3])?1:-1)*+i[4]);if(i=r.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return e.latLng((/N/i.test(i[2])?1:-1)*+i[1],(/E/i.test(i[4])?1:-1)*+i[3]);if(i=r.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?$/))return e.latLng((/N/i.test(i[1])?1:-1)*(+i[2]+ +i[3]/60),(/E/i.test(i[4])?1:-1)*(+i[5]+ +i[6]/60));if(i=r.match(/^(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([NS])\W*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([EW])$/))return e.latLng((/N/i.test(i[3])?1:-1)*(+i[1]+ +i[2]/60),(/E/i.test(i[6])?1:-1)*(+i[4]+ +i[5]/60));if(i=r.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?$/))return e.latLng((/N/i.test(i[1])?1:-1)*(+i[2]+ +i[3]/60+ +i[4]/3600),(/E/i.test(i[5])?1:-1)*(+i[6]+ +i[7]/60+ +i[8]/3600));if(i=r.match(/^(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]\s*([NS])\W*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\s*([EW])$/))return e.latLng((/N/i.test(i[4])?1:-1)*(+i[1]+ +i[2]/60+ +i[3]/3600),(/E/i.test(i[8])?1:-1)*(+i[5]+ +i[6]/60+ +i[7]/3600));if(i=r.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return e.latLng(+i[1],+i[2])}var M=function(){function r(u){this.options={next:void 0,sizeInMeters:1e4},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=K(t);if(a){var n=[{name:t,center:a,bbox:a.toBounds(this.options.sizeInMeters)}];s.call(o,n)}else this.options.next&&this.options.next.geocode(t,s,o)},r}();function ae(r){return new M(r)}var P=function(){function r(u){this.options={serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"},e.Util.setOptions(this,u)}var i=r.prototype;return i._getProperties=function(t){for(var s={text:t.text,address:t.address},o=0;o<(t.context||[]).length;o++){var a=t.context[o].id.split(".")[0];s[a]=t.context[o].text,t.context[o].short_code&&(s.countryShortCode=t.context[o].short_code)}return s},i.geocode=function(t,s,o){var a=this,n=f(this.options,{access_token:this.options.apiKey});n.proximity!==void 0&&n.proximity.lat!==void 0&&n.proximity.lng!==void 0&&(n.proximity=n.proximity.lng+","+n.proximity.lat),g(this.options.serviceUrl+encodeURIComponent(t)+".json",n,function(c){var p=[];if(c.features&&c.features.length)for(var l=0;l<=c.features.length-1;l++){var d=c.features[l],h=e.latLng(d.center.reverse()),v=void 0;d.bbox?v=e.latLngBounds(e.latLng(d.bbox.slice(0,2).reverse()),e.latLng(d.bbox.slice(2,4).reverse())):v=e.latLngBounds(h,h),p[l]={name:d.place_name,bbox:v,center:h,properties:a._getProperties(d)}}s.call(o,p)})},i.suggest=function(t,s,o){return this.geocode(t,s,o)},i.reverse=function(t,s,o,a){var n=this,c=this.options.serviceUrl+t.lng+","+t.lat+".json",p=m(this.options,{access_token:this.options.apiKey});g(c,p,function(l){var d=[];if(l.features&&l.features.length)for(var h=0;h<=l.features.length-1;h++){var v=l.features[h],C=e.latLng(v.center.reverse()),E=void 0;v.bbox?E=e.latLngBounds(e.latLng(v.bbox.slice(0,2).reverse()),e.latLng(v.bbox.slice(2,4).reverse())):E=e.latLngBounds(C,C),d[h]={name:v.place_name,bbox:E,center:C,properties:n._getProperties(v)}}o.call(a,d)})},r}();function le(r){return new P(r)}var G=function(){function r(u){this.options={serviceUrl:"https://www.mapquestapi.com/geocoding/v1"},e.Util.setOptions(this,u),this.options.apiKey=decodeURIComponent(this.options.apiKey)}var i=r.prototype;return i._formatName=function(){return[].slice.call(arguments).filter(function(t){return!!t}).join(", ")},i.geocode=function(t,s,o){var a=f(this.options,{key:this.options.apiKey,location:t,limit:5,outFormat:"json"});g(this.options.serviceUrl+"/address",a,e.Util.bind(function(n){var c=[];if(n.results&&n.results[0].locations)for(var p=n.results[0].locations.length-1;p>=0;p--){var l=n.results[0].locations[p],d=e.latLng(l.latLng);c[p]={name:this._formatName(l.street,l.adminArea4,l.adminArea3,l.adminArea1),bbox:e.latLngBounds(d,d),center:d}}s.call(o,c)},this))},i.reverse=function(t,s,o,a){var n=m(this.options,{key:this.options.apiKey,location:t.lat+","+t.lng,outputFormat:"json"});g(this.options.serviceUrl+"/reverse",n,e.Util.bind(function(c){var p=[];if(c.results&&c.results[0].locations)for(var l=c.results[0].locations.length-1;l>=0;l--){var d=c.results[0].locations[l],h=e.latLng(d.latLng);p[l]={name:this._formatName(d.street,d.adminArea4,d.adminArea3,d.adminArea1),bbox:e.latLngBounds(h,h),center:h}}o.call(a,p)},this))},r}();function ce(r){return new G(r)}var A=function(){function r(u){this.options={userId:void 0,apiKey:void 0,serviceUrl:"https://neutrinoapi.com/"},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:t.split(/\s+/).join(".")});g(this.options.serviceUrl+"geocode-address",a,function(n){var c=[];if(n.locations){n.geometry=n.locations[0];var p=e.latLng(n.geometry.latitude,n.geometry.longitude),l=e.latLngBounds(p,p);c[0]={name:n.geometry.address,bbox:l,center:p}}s.call(o,c)})},i.suggest=function(t,s,o){return this.geocode(t,s,o)},i.reverse=function(t,s,o,a){var n=m(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:t.lat,longitude:t.lng});g(this.options.serviceUrl+"geocode-reverse",n,function(c){var p=[];if(c.status.status==200&&c.found){var l=e.latLng(t.lat,t.lng),d=e.latLngBounds(l,l);p[0]={name:c.address,bbox:d,center:l}}o.call(a,p)})},r}();function pe(r){return new A(r)}var U=function(){function r(u){this.options={serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate:function(s){var o=s.address,a,n=[];return(o.road||o.building)&&n.push("{building} {road} {house_number}"),(o.city||o.town||o.village||o.hamlet)&&(a=n.length>0?"leaflet-control-geocoder-address-detail":"",n.push('<span class="'+a+'">{postcode} {city} {town} {village} {hamlet}</span>')),(o.state||o.country)&&(a=n.length>0?"leaflet-control-geocoder-address-context":"",n.push('<span class="'+a+'">{state} {country}</span>')),oe(n.join("<br/>"),o)}},e.Util.setOptions(this,u||{})}var i=r.prototype;return i.geocode=function(t,s,o){var a=this,n=f(this.options,{q:t,limit:5,format:"json",addressdetails:1});g(this.options.serviceUrl+"search",n,function(c){for(var p=[],l=c.length-1;l>=0;l--){for(var d=c[l].boundingbox,h=0;h<4;h++)d[h]=+d[h];p[l]={icon:c[l].icon,name:c[l].display_name,html:a.options.htmlTemplate?a.options.htmlTemplate(c[l]):void 0,bbox:e.latLngBounds([d[0],d[2]],[d[1],d[3]]),center:e.latLng(c[l].lat,c[l].lon),properties:c[l]}}s.call(o,p)})},i.reverse=function(t,s,o,a){var n=this,c=m(this.options,{lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(s/256)/Math.log(2)),addressdetails:1,format:"json"});g(this.options.serviceUrl+"reverse",c,function(p){var l=[];if(p&&p.lat&&p.lon){var d=e.latLng(p.lat,p.lon),h=e.latLngBounds(d,d);l.push({name:p.display_name,html:n.options.htmlTemplate?n.options.htmlTemplate(p):void 0,center:d,bbox:h,properties:p})}o.call(a,l)})},r}();function ue(r){return new U(r)}var j=function(){function r(u){e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){try{var a=this.options.OpenLocationCode.decode(t),n={name:t,center:e.latLng(a.latitudeCenter,a.longitudeCenter),bbox:e.latLngBounds(e.latLng(a.latitudeLo,a.longitudeLo),e.latLng(a.latitudeHi,a.longitudeHi))};s.call(o,[n])}catch(c){console.warn(c),s.call(o,[])}},i.reverse=function(t,s,o,a){try{var n=this.options.OpenLocationCode.encode(t.lat,t.lng,this.options.codeLength),c={name:n,center:e.latLng(t.lat,t.lng),bbox:e.latLngBounds(e.latLng(t.lat,t.lng),e.latLng(t.lat,t.lng))};o.call(a,[c])}catch(p){console.warn(p),o.call(a,[])}},r}();function de(r){return new j(r)}var I=function(){function r(u){this.options={serviceUrl:"https://api.opencagedata.com/geocode/v1/json"},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{key:this.options.apiKey,q:t});g(this.options.serviceUrl,a,function(n){var c=[];if(n.results&&n.results.length)for(var p=0;p<n.results.length;p++){var l=n.results[p],d=e.latLng(l.geometry),h=void 0;l.annotations&&l.annotations.bounds?h=e.latLngBounds(e.latLng(l.annotations.bounds.northeast),e.latLng(l.annotations.bounds.southwest)):h=e.latLngBounds(d,d),c.push({name:l.formatted,bbox:h,center:d})}s.call(o,c)})},i.suggest=function(t,s,o){return this.geocode(t,s,o)},i.reverse=function(t,s,o,a){var n=m(this.options,{key:this.options.apiKey,q:[t.lat,t.lng].join(",")});g(this.options.serviceUrl,n,function(c){var p=[];if(c.results&&c.results.length)for(var l=0;l<c.results.length;l++){var d=c.results[l],h=e.latLng(d.geometry),v=void 0;d.annotations&&d.annotations.bounds?v=e.latLngBounds(e.latLng(d.annotations.bounds.northeast),e.latLng(d.annotations.bounds.southwest)):v=e.latLngBounds(h,h),p.push({name:d.formatted,bbox:v,center:h})}o.call(a,p)})},r}();function he(r){return new I(r)}var y=function(){function r(u){this.options={serviceUrl:"https://api.geocode.earth/v1"},this._lastSuggest=0,e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=this,n=f(this.options,{api_key:this.options.apiKey,text:t});g(this.options.serviceUrl+"/search",n,function(c){s.call(o,a._parseResults(c,"bbox"))})},i.suggest=function(t,s,o){var a=this,n=f(this.options,{api_key:this.options.apiKey,text:t});g(this.options.serviceUrl+"/autocomplete",n,function(c){c.geocoding.timestamp>a._lastSuggest&&(a._lastSuggest=c.geocoding.timestamp,s.call(o,a._parseResults(c,"bbox")))})},i.reverse=function(t,s,o,a){var n=this,c=m(this.options,{api_key:this.options.apiKey,"point.lat":t.lat,"point.lon":t.lng});g(this.options.serviceUrl+"/reverse",c,function(p){o.call(a,n._parseResults(p,"bounds"))})},i._parseResults=function(t,s){var o=[];return e.geoJSON(t,{pointToLayer:function(n,c){return e.circleMarker(c)},onEachFeature:function(n,c){var p={},l,d;c.getBounds?(l=c.getBounds(),d=l.getCenter()):c.feature.bbox?(d=c.getLatLng(),l=e.latLngBounds(e.GeoJSON.coordsToLatLng(c.feature.bbox.slice(0,2)),e.GeoJSON.coordsToLatLng(c.feature.bbox.slice(2,4)))):(d=c.getLatLng(),l=e.latLngBounds(d,d)),p.name=c.feature.properties.label,p.center=d,p[s]=l,p.properties=c.feature.properties,o.push(p)}}),o},r}();function x(r){return new y(r)}var ge=y,ve=x,fe=y,me=x,W=function(r){D(i,r);function i(u){return r.call(this,e.Util.extend({serviceUrl:"https://api.openrouteservice.org/geocode"},u))||this}return i}(y);function _e(r){return new W(r)}var H=function(){function r(u){this.options={serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){var a=f(this.options,{q:t});g(this.options.serviceUrl,a,e.Util.bind(function(n){s.call(o,this._decodeFeatures(n))},this))},i.suggest=function(t,s,o){return this.geocode(t,s,o)},i.reverse=function(t,s,o,a){var n=m(this.options,{lat:t.lat,lon:t.lng});g(this.options.reverseUrl,n,e.Util.bind(function(c){o.call(a,this._decodeFeatures(c))},this))},i._decodeFeatures=function(t){var s=[];if(t&&t.features)for(var o=0;o<t.features.length;o++){var a=t.features[o],n=a.geometry.coordinates,c=e.latLng(n[1],n[0]),p=a.properties.extent,l=p?e.latLngBounds([p[1],p[0]],[p[3],p[2]]):e.latLngBounds(c,c);s.push({name:this._decodeFeatureName(a),html:this.options.htmlTemplate?this.options.htmlTemplate(a):void 0,center:c,bbox:l,properties:a.properties})}return s},i._decodeFeatureName=function(t){return(this.options.nameProperties||[]).map(function(s){return t.properties[s]}).filter(function(s){return!!s}).join(", ")},r}();function Le(r){return new H(r)}var J=function(){function r(u){this.options={serviceUrl:"https://api.what3words.com/v2/"},e.Util.setOptions(this,u)}var i=r.prototype;return i.geocode=function(t,s,o){g(this.options.serviceUrl+"forward",f(this.options,{key:this.options.apiKey,addr:t.split(/\s+/).join(".")}),function(a){var n=[];if(a.geometry){var c=e.latLng(a.geometry.lat,a.geometry.lng),p=e.latLngBounds(c,c);n[0]={name:a.words,bbox:p,center:c}}s.call(o,n)})},i.suggest=function(t,s,o){return this.geocode(t,s,o)},i.reverse=function(t,s,o,a){g(this.options.serviceUrl+"reverse",m(this.options,{key:this.options.apiKey,coords:[t.lat,t.lng].join(",")}),function(n){var c=[];if(n.status.status==200){var p=e.latLng(n.geometry.lat,n.geometry.lng),l=e.latLngBounds(p,p);c[0]={name:n.words,bbox:l,center:p}}o.call(a,c)})},r}();function ye(r){return new J(r)}var z={__proto__:null,geocodingParams:f,reverseParams:m,ArcGis:k,arcgis:se,Bing:B,bing:ne,Google:N,google:re,HERE:S,HEREv2:T,here:ie,parseLatLng:K,LatLng:M,latLng:ae,Mapbox:P,mapbox:le,MapQuest:G,mapQuest:ce,Neutrino:A,neutrino:pe,Nominatim:U,nominatim:ue,OpenLocationCode:j,openLocationCode:de,OpenCage:I,opencage:he,Pelias:y,pelias:x,GeocodeEarth:ge,geocodeEarth:ve,Mapzen:fe,mapzen:me,Openrouteservice:W,openrouteservice:_e,Photon:H,photon:Le,What3Words:J,what3words:ye},w=function(){};e.Util.extend(w.prototype,e.Control.prototype),e.Util.extend(w.prototype,e.Evented.prototype);var b=function(r){D(i,r);function i(t){var s;return s=r.call(this,t)||this,s.options={showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0},s._requestCount=0,e.Util.setOptions(V(s),t),s.options.geocoder||(s.options.geocoder=new U),s}var u=i.prototype;return u.addThrobberClass=function(){e.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")},u.removeThrobberClass=function(){e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")},u.onAdd=function(s){var o=this,a="leaflet-control-geocoder",n=e.DomUtil.create("div",a+" leaflet-bar"),c=e.DomUtil.create("button",a+"-icon",n),p=this._form=e.DomUtil.create("div",a+"-form",n);this._map=s,this._container=n,c.innerHTML="&nbsp;",c.type="button",c.setAttribute("aria-label",this.options.iconLabel);var l=this._input=e.DomUtil.create("input","",p);return l.type="text",l.value=this.options.query,l.placeholder=this.options.placeholder,e.DomEvent.disableClickPropagation(l),this._errorElement=e.DomUtil.create("div",a+"-form-no-error",n),this._errorElement.innerHTML=this.options.errorMessage,this._alts=e.DomUtil.create("ul",a+"-alternatives leaflet-control-geocoder-alternatives-minimized",n),e.DomEvent.disableClickPropagation(this._alts),e.DomEvent.addListener(l,"keydown",this._keydown,this),this.options.geocoder.suggest&&e.DomEvent.addListener(l,"input",this._change,this),e.DomEvent.addListener(l,"blur",function(){o.options.collapsed&&!o._preventBlurCollapse&&o._collapse(),o._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?e.DomEvent.addListener(n,"click",function(d){d.button===0&&d.detail!==2&&o._toggle()}):this.options.expand==="touch"?e.DomEvent.addListener(n,e.Browser.touch?"touchstart mousedown":"mousedown",function(d){o._toggle(),d.preventDefault(),d.stopPropagation()},this):(e.DomEvent.addListener(n,"mouseover",this._expand,this),e.DomEvent.addListener(n,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),e.Browser.touch?e.DomEvent.addListener(n,"touchstart",function(){return o._geocode()}):e.DomEvent.addListener(n,"click",function(){return o._geocode()})),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),e.DomEvent.disableClickPropagation(n),n},u.setQuery=function(s){return this._input.value=s,this},u._geocodeResult=function(s,o){if(!o&&this.options.showUniqueResult&&s.length===1)this._geocodeResultSelected(s[0]);else if(s.length>0){this._alts.innerHTML="",this._results=s,e.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),e.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(var a=0;a<s.length;a++)this._alts.appendChild(this._createAlt(s[a],a))}else e.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),e.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")},u.markGeocode=function(s){var o=s.geocode;return this._map.fitBounds(o.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new e.Marker(o.center).bindPopup(o.html||o.name).addTo(this._map).openPopup(),this},u._geocode=function(s){var o=this,a=this._input.value;if(!(!s&&a.length<this.options.queryMinLength)){var n=++this._requestCount,c=function(d){if(n===o._requestCount){var h={input:a,results:d};o.fire(s?"finishsuggest":"finishgeocode",h),o._geocodeResult(d,s)}};this._lastGeocode=a,s||this._clearResults();var p={input:a};this.fire(s?"startsuggest":"startgeocode",p),s?this.options.geocoder.suggest(a,c):this.options.geocoder.geocode(a,c)}},u._geocodeResultSelected=function(s){var o={geocode:s};this.fire("markgeocode",o)},u._toggle=function(){e.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()},u._expand=function(){e.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")},u._collapse=function(){e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),e.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),e.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")},u._clearResults=function(){e.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,e.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")},u._createAlt=function(s,o){var a=this,n=e.DomUtil.create("li",""),c=e.DomUtil.create("a","",n),p=this.options.showResultIcons&&s.icon?e.DomUtil.create("img","",c):null,l=s.html?void 0:document.createTextNode(s.name),d=function(v){a._preventBlurCollapse=!0,e.DomEvent.stop(v),a._geocodeResultSelected(s),e.DomEvent.on(n,"click touchend",function(){a.options.collapsed?a._collapse():a._clearResults()})};return p&&(p.src=s.icon),n.setAttribute("data-result-index",String(o)),s.html?c.innerHTML=c.innerHTML+s.html:l&&c.appendChild(l),e.DomEvent.addListener(n,"mousedown touchstart",d,this),n},u._keydown=function(s){var o=this,a=function(p){o._selection&&(e.DomUtil.removeClass(o._selection,"leaflet-control-geocoder-selected"),o._selection=o._selection[p>0?"nextSibling":"previousSibling"]),o._selection||(o._selection=o._alts[p>0?"firstChild":"lastChild"]),o._selection&&e.DomUtil.addClass(o._selection,"leaflet-control-geocoder-selected")};switch(s.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:a(-1);break;case 40:a(1);break;case 13:if(this._selection){var n=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[n]),this._clearResults()}else this._geocode();break;default:return}e.DomEvent.preventDefault(s)},u._change=function(){var s=this,o=this._input.value;o!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),o.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(function(){return s._geocode(!0)},this.options.suggestTimeout):this._clearResults())},i}(w);function F(r){return new b(r)}/* @preserve
 * Leaflet Control Geocoder
 * https://github.com/perliedman/leaflet-control-geocoder
 *
 * Copyright (c) 2012 sa3m (https://github.com/sa3m)
 * Copyright (c) 2018 Per Liedman
 * All rights reserved.
 */return e.Util.extend(b,z),e.Util.extend(e.Control,{Geocoder:b,geocoder:F}),_.Geocoder=b,_.default=b,_.geocoder=F,_.geocoders=z,_})({},L);
