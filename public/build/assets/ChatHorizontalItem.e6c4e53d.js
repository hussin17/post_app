import U from"./PsCard.c6f1c9d7.js";import D from"./PsIcon.ebbfcfb3.js";import k from"./PsLabel.6f218a30.js";import{u as H}from"./AppInfoStore.7a7c38d9.js";import{A as V}from"./AppInfoParameterHolder.e24d894d.js";import{u as T}from"./PsValueHolder.0b2db09a.js";import{P as x}from"./PsValueStore.4aa1bdc1.js";import{P as w}from"./ps_constants.1e4471b7.js";import{C as j}from"./ChatHistory.4704e4d0.js";import{r as I,Q as z,o as g,c as y,a as r,m as _,b as l,w as d,p as c,t as i,n as O,J as A,O as L}from"./app.94623934.js";import{h as P}from"./moment.9709ab41.js";import{f as N}from"./format.min.83c29ea7.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import"https://checkout.razorpay.com/v1/checkout.js";import"./PsApiService.16e28b45.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./Product.21fd7f06.js";import"./Category.3f13b0a3.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemLocationTownship.94979fe0.js";import"./User.fb568515.js";import"./RatingDetail.291ad5d1.js";const E={name:"ChatHorizontalItem",components:{PsIcon:D,PsLabel:k,PsCard:U},props:{chathistory:{type:j},dateFormat:{type:String}},setup(o){x.psValueStore=T();const t=x().getLoginUserId(),n=new V;n.userId=t;const h=H();function b(e){return e.toString()=="0"?A("item_price__free"):N(h.appInfo.data.mobileSetting.price_format,e)}function s(e){L.Inertia.get(route("fe_chat"),{buyer_user_id:e.buyerUserId,seller_user_id:e.sellerUserId,item_id:e.itemId,chat_flag:w.CHAT_FROM_SELLER.toString()})}function p(e){let m=e.split(" ")[0],a=e.split(" ")[1],v=new Date().toISOString().split("T")[0];a=a.split(":"),a.pop(),a=a.join(":");let S=new Date,u=new Date(S);u.setDate(u.getDate()-1);let C=u.toISOString().split("T")[0];switch(!0){case m==v:return a;case m==C:return"Yesterday";default:return P(m).format(o.dateFormat)}}return{formatPrice:b,PsConst:w,appInfoStore:h,gotoDetail:s,chatTimeHistory:p,moment:P}}},F={class:"flex h-full"},M={class:"h-full w-[64px] sm:w-[100px] relative flex items-center"},R={alt:"Placeholder",class:"rounded-full bg-transparent h-16 w-16 sm:h-full sm:w-full border-2 border-gray-300"},Y={class:"absolute left-9 top-12 w-6 h-6 block sm:hidden"},J={alt:"Placeholder",class:"rounded-full w-full h-full border-2 border-gray-100"},Q={class:"grow px-4 py-1"},q={class:"flex justify-between items-center w-full"},G={class:"flex justify-between w-full"},K={key:0,class:"flex justify-center items-center font-normal text-sm rounded-full w-5 h-5 bg-fePrimary-600 text-gray-200"},W={key:1,class:"w-10 h-10 flex justify-center items-center"},X={class:"h-full hidden sm:block w-32"},Z={alt:"Placeholder",class:"rounded w-full h-full"};function $(o,f,t,n,h,b){const s=I("ps-label"),p=I("ps-icon"),e=z("lazy");return g(),y("div",{class:"cursor-pointer",onClick:f[0]||(f[0]=m=>n.gotoDetail(t.chathistory))},[r("div",{class:O(`h-[80px] sm:h-[100px] rounded-lg shadow-sm overflow-hidden mb-3 ${t.chathistory.buyerUnreadCount>0?"bg-gray-200":""} dark:bg-feSecondary-800`)},[r("div",F,[r("div",M,[_(r("img",R,null,512),[[e,{src:o.$page.props.thumb1xUrl+"/"+t.chathistory.seller.userCoverPhoto,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]]),r("div",Y,[_(r("img",J,null,512),[[e,{src:o.$page.props.thumb1xUrl+"/"+t.chathistory.item.defaultPhoto.imgPath,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]])])]),r("div",Q,[l(s,{textColor:"font-semibold text-fePrimary-500 text-xs sm:text-xl"},{default:d(()=>[c(i(t.chathistory?t.chathistory.seller.userName:""),1)]),_:1}),r("div",q,[l(s,{class:"font-medium text-xs sm:text-lg truncate"},{default:d(()=>[c(i(t.chathistory?t.chathistory.item.title:""),1)]),_:1}),l(s,{class:"text-xs"},{default:d(()=>[c(i(n.chatTimeHistory(t.chathistory.addedDate)),1)]),_:1})]),r("div",G,[l(s,{class:"font-normal text-sm text-gray-400",textColor:"text-gray-600"},{default:d(()=>[c(i(t.chathistory?t.chathistory.latestChatMessage:""),1)]),_:1}),t.chathistory.buyerUnreadCount>0?(g(),y("span",K,i(t.chathistory?t.chathistory.buyerUnreadCount:"0"),1)):(g(),y("div",W,[l(p,{name:"done_all",class:"text-gray-400",w:"24",h:"24"})]))])]),r("div",X,[_(r("img",Z,null,512),[[e,{src:o.$page.props.thumb1xUrl+"/"+t.chathistory.item.defaultPhoto.imgPath,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]])])])],2)])}var vt=B(E,[["render",$]]);export{vt as default};
