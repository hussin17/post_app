import H from"./PsLabel.6f218a30.js";import{N as T,u as R}from"./NotificationStore.902df771.js";import D from"./PsIcon.ebbfcfb3.js";import E from"./PsDropdown.915108dc.js";import{P as z}from"./PsValueStore.4aa1bdc1.js";import A from"./PsLoadingDialog.c437a5f0.js";import{i as U,r as _,Q as O,o as h,c as k,a as r,m as N,b as i,w as f,p as w,t as C,g as S,n as F,O as M,J as I}from"./app.94623934.js";import{P as g}from"./ps_constants.1e4471b7.js";import{u as L,U as j}from"./UserUnReadMessageParameterHolder.d3222792.js";import V from"./PsConfirmDialog2.d0f0fa81.js";import{P as B}from"./PsUtils.aa012712.js";import J from"./PsLine.9a56d1e4.js";import{h as G}from"./moment.9709ab41.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";class q{constructor(){this.userId="",this.deviceToken="",this.notiId="",this.notiType=""}NotiActionParameterHolder(){this.userId="",this.deviceToken="",this.notiId="",this.notiType=""}toMap(){const o={};return o.user_id=this.userId,o.device_token=this.deviceToken,o.noti_id=this.notiId,o.noti_type=this.notiType,o}}class K{constructor(){this.userId="",this.deviceToken=""}NotiParameterHolder(){this.userId="",this.deviceToken=""}toMap(){const o={};return o.user_id=this.userId,o.device_token=this.deviceToken,o}}const W={name:"NotiHorizontalItem",components:{PsLabel:H,PsDropdown:E,PsIcon:D,PsLoadingDialog:A,PsConfirmDialog2:V,PsLine:J},props:{noti:{type:T,default:new T},onClick:Function},setup(){const s=R(),e=z().getLoginUserId(),t=new q,u=new K,n=U();u.userId=e;const l=L(),d=new j;d.userId=e;const m=U(!1),x=U();async function v(a,y){n.value.openModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=a,t.notiType=y,await s.markAsRead(t,e),await s.resetNotiList(u),await l.postUserUnreadMessageCount(d),n.value.closeModal()}async function b(a,y){n.value.openModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=a,t.notiType=y,await s.markAsUnRead(t,e),await s.resetNotiList(u),await l.postUserUnreadMessageCount(d),n.value.closeModal()}async function p(a,y){n.value.openModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=a,t.notiType=y,await s.deleteNoti(t,e),await s.resetNotiList(u),await l.postUserUnreadMessageCount(d),n.value.closeModal()}async function P(a){a.type==g.PUSH_NOTI?M.Inertia.get(route("fe_notification_detail"),{notiId:a.id}):(a.type==g.CHAT_MESSAGE||a.type==g.OFFER_RECEIVED||a.type==g.OFFER_ACCEPTED||a.type==g.OFFER_REJECTED)&&(await v(a.id,a.type),n.value.openModal(),M.Inertia.get(route("fe_chat"),{buyer_user_id:a.buyerUserId,seller_user_id:a.sellerUserId,item_id:a.itemId,chat_flag:a.chatFlag}))}function c(a){x.value.openModal(I("noti_list__delete_title"),I("noti_list__delete_dialog"),I("chat__confirm"),I("chat__cancel"),()=>{p(a.id,a.type)},()=>{B.log("cancel")})}return{notiStore:s,showMenu:m,markAsRead:v,markAsUnRead:b,deleteNoti:p,ps_loading_dialog:n,ps_confirm_dialog:x,clickNoti:P,PsConst:g,deleteConfirm:c,moment:G}}},X={class:"flex flex-row justify-between h-[62px] sm:h-[100px]"},Y={class:"rounded-md bg-feBackground dark:bg-fePrimaryDark-black"},Z={class:"sm:w-[100px] w-[62px] h-[62px] sm:h-[100px]"},$={key:0,alt:"Placeholder",width:"15px",height:"10px",class:"w-[62px] h-[62px] sm:w-full sm:h-full rounded-md"},ee={key:1,alt:"Placeholder",width:"15px",height:"10px",class:"w-[62px] h-[62px] sm:w-full sm:h-full rounded-md"},te={class:"flex flex-col ms-4 my-auto"},oe={class:"flex flex-col w-[62px] sm:w-[120px]"},ae={class:"flex justify-end w-full h-1/2"},se={class:"z-30"},ie={class:"h-1/2 w-full flex justify-end items-end p-1 sm:p-2"};function re(s,o,e,t,u,n){var P;const l=_("ps-label"),d=_("ps-icon"),m=_("ps-line"),x=_("ps-dropdown"),v=_("ps-loading-dialog"),b=_("ps-confirm-dialog-2"),p=O("lazy");return h(),k("div",{class:F([e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"bg-feSecondary-100":"bg-fePrimary-50 dark:bg-fePrimary-50":"bg-feSecondary-000","w-full cursor-pointer h-[62px] sm:h-[100px] dark:bg-fePrimaryDark-black rounded"]),onClick:o[5]||(o[5]=c=>e.onClick!=null?e.onClick(e.noti):null)},[r("div",X,[r("div",{class:"flex-grow flex flex-row",onClick:o[0]||(o[0]=c=>t.clickNoti(e.noti))},[r("div",Y,[r("div",Z,[(P=e.noti)!=null&&P.senderCoverPhoto?N((h(),k("img",$,null,512)),[[p,{src:s.$page.props.thumb2xUrl+"/"+e.noti.senderCoverPhoto,loading:s.$page.props.sysImageUrl+"/loading_gif.gif",error:s.$page.props.sysImageUrl+"/default_photo.png"}]]):N((h(),k("img",ee,null,512)),[[p,{src:s.$page.props.thumb2xUrl+"/"+e.noti.defaultPhoto.imgPath,loading:s.$page.props.sysImageUrl+"/loading_gif.gif",error:s.$page.props.sysImageUrl+"/default_photo.png"}]])])]),r("div",te,[i(l,{class:"text-xxs sm:text-sm lg:text-base",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-gray-500 dark:text-gray-200":"text-gray-500":"text-gray-500 dark:text-gray-200",innerHTML:e.noti.message.length>75?e.noti.message.slice(0,75)+" ....":e.noti.message},null,8,["textColor","innerHTML"])])]),r("div",oe,[r("div",ae,[i(x,{horizontalAlign:"right",h:"h-auto ",class:"",onClick:o[4]||(o[4]=c=>t.showMenu=!t.showMenu)},{select:f(()=>[i(d,{name:"vertical-dot",w:"24",h:"24",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-gray-500 dark:text-gray-200":"text-gray-500":"text-gray-500 dark:text-gray-200",class:"mt-2 text-base me-1 cursor-pointer"},null,8,["textColor"])]),list:f(()=>[r("div",se,[e.noti.isRead=="0"&&e.noti.type!=t.PsConst.PUSH_NOTI?(h(),k("div",{key:0,onClick:o[1]||(o[1]=c=>t.markAsRead(e.noti.id,e.noti.type)),class:"w-56 flex justify-center items-center py-4 px-2 hover:bg-fePrimary-000 dark:hover:bg-fePrimaryDark-black cursor-pointer"},[i(d,{name:"checkNoCircle",class:"mt-2"}),i(l,{class:"ms-2"},{default:f(()=>[w(C(s.$t("noti_horizontal_item__mark_as_read")),1)]),_:1})])):S("",!0),e.noti.isRead=="1"?(h(),k("div",{key:1,onClick:o[2]||(o[2]=c=>t.markAsUnRead(e.noti.id,e.noti.type)),class:"w-56 flex justify-center py-4 px-2 hover:bg-fePrimary-000 dark:hover:bg-fePrimaryDark-black cursor-pointer items-center"},[i(d,{name:"checkNoCircle",class:"mt-2"}),i(l,{class:"ms-2"},{default:f(()=>[w(C(s.$t("noti_horizontal_item__mark_as_unread")),1)]),_:1})])):S("",!0),i(m,{class:"mx-4"}),r("div",{onClick:o[3]||(o[3]=c=>t.deleteConfirm(e.noti)),class:"w-56 flex justify-center py-4 px-2 hover:bg-fePrimary-000 dark:hover:bg-fePrimaryDark-black cursor-pointer items-center"},[i(d,{name:"trash-alt"}),i(l,{class:"ms-2"},{default:f(()=>[w(C(s.$t("noti_horizontal_item__delete_noti")),1)]),_:1})])])]),_:1})]),r("div",ie,[i(l,{class:"text-3xs sm:text-xs truncate",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-gray-500 dark:text-gray-200":"text-gray-500":"text-gray-500 dark:text-gray-200"},{default:f(()=>[w(C(t.moment(e.noti.addedDate).format(s.$page.props.dateFormat)),1)]),_:1},8,["textColor"])])])]),i(v,{ref:"ps_loading_dialog"},null,512),i(b,{ref:"ps_confirm_dialog"},null,512)],2)}var ne=Q(W,[["render",re]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{ne as N,K as a,Pe as b};
